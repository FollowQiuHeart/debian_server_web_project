[{"model": "contenttypes.contenttype", "pk": 1, "fields": {"app_label": "jet", "model": "bookmark"}}, {"model": "contenttypes.contenttype", "pk": 2, "fields": {"app_label": "jet", "model": "pinnedapplication"}}, {"model": "contenttypes.contenttype", "pk": 3, "fields": {"app_label": "admin", "model": "logentry"}}, {"model": "contenttypes.contenttype", "pk": 4, "fields": {"app_label": "auth", "model": "permission"}}, {"model": "contenttypes.contenttype", "pk": 5, "fields": {"app_label": "auth", "model": "group"}}, {"model": "contenttypes.contenttype", "pk": 6, "fields": {"app_label": "contenttypes", "model": "contenttype"}}, {"model": "contenttypes.contenttype", "pk": 7, "fields": {"app_label": "sessions", "model": "session"}}, {"model": "contenttypes.contenttype", "pk": 8, "fields": {"app_label": "blog", "model": "user"}}, {"model": "contenttypes.contenttype", "pk": 9, "fields": {"app_label": "blog", "model": "blog"}}, {"model": "contenttypes.contenttype", "pk": 10, "fields": {"app_label": "blog", "model": "category"}}, {"model": "contenttypes.contenttype", "pk": 11, "fields": {"app_label": "blog", "model": "conment"}}, {"model": "contenttypes.contenttype", "pk": 12, "fields": {"app_label": "blog", "model": "message"}}, {"model": "contenttypes.contenttype", "pk": 13, "fields": {"app_label": "blog", "model": "tagprofile"}}, {"model": "sessions.session", "pk": "5tq5qfyqmp47wd1s4b9vsq16p1i9hawt", "fields": {"session_data": "YzUyYjk3ZDI1MjkyOWY5ZTY0YWMzNjM1MDkxYjk2MTkzYzY2MDhlMTp7Il9hdXRoX3VzZXJfaWQiOiIxIiwiX2F1dGhfdXNlcl9iYWNrZW5kIjoiZGphbmdvLmNvbnRyaWIuYXV0aC5iYWNrZW5kcy5Nb2RlbEJhY2tlbmQiLCJfYXV0aF91c2VyX2hhc2giOiI4YWQ1NDZmNTk2YzU5MWQwMzM3NTEzMTZiNjFlZWQwMTIxMTEzZTNhIn0=", "expire_date": "2019-08-06T16:42:31.445"}}, {"model": "sessions.session", "pk": "aqipmoghida91il22vn9ksk1toc7kovq", "fields": {"session_data": "YzUyYjk3ZDI1MjkyOWY5ZTY0YWMzNjM1MDkxYjk2MTkzYzY2MDhlMTp7Il9hdXRoX3VzZXJfaWQiOiIxIiwiX2F1dGhfdXNlcl9iYWNrZW5kIjoiZGphbmdvLmNvbnRyaWIuYXV0aC5iYWNrZW5kcy5Nb2RlbEJhY2tlbmQiLCJfYXV0aF91c2VyX2hhc2giOiI4YWQ1NDZmNTk2YzU5MWQwMzM3NTEzMTZiNjFlZWQwMTIxMTEzZTNhIn0=", "expire_date": "2020-03-19T15:04:37.508"}}, {"model": "sessions.session", "pk": "tq0v2hj4kkhe7uzd2m1kabk2h3tly64q", "fields": {"session_data": "YzUyYjk3ZDI1MjkyOWY5ZTY0YWMzNjM1MDkxYjk2MTkzYzY2MDhlMTp7Il9hdXRoX3VzZXJfaWQiOiIxIiwiX2F1dGhfdXNlcl9iYWNrZW5kIjoiZGphbmdvLmNvbnRyaWIuYXV0aC5iYWNrZW5kcy5Nb2RlbEJhY2tlbmQiLCJfYXV0aF91c2VyX2hhc2giOiI4YWQ1NDZmNTk2YzU5MWQwMzM3NTEzMTZiNjFlZWQwMTIxMTEzZTNhIn0=", "expire_date": "2019-08-15T15:09:13.842"}}, {"model": "sessions.session", "pk": "wpaw316irdiipljptzfsoolkgzemd8pb", "fields": {"session_data": "YzUyYjk3ZDI1MjkyOWY5ZTY0YWMzNjM1MDkxYjk2MTkzYzY2MDhlMTp7Il9hdXRoX3VzZXJfaWQiOiIxIiwiX2F1dGhfdXNlcl9iYWNrZW5kIjoiZGphbmdvLmNvbnRyaWIuYXV0aC5iYWNrZW5kcy5Nb2RlbEJhY2tlbmQiLCJfYXV0aF91c2VyX2hhc2giOiI4YWQ1NDZmNTk2YzU5MWQwMzM3NTEzMTZiNjFlZWQwMTIxMTEzZTNhIn0=", "expire_date": "2019-08-15T16:41:09.967"}}, {"model": "blog.category", "pk": 1, "fields": {"name": "Python\u5927\u6cd5", "add_time": "2019-07-23T16:47:00", "edit_time": "2019-07-23T16:47:00"}}, {"model": "blog.category", "pk": 2, "fields": {"name": "\u6570\u636e\u5e93", "add_time": "2019-07-23T16:50:00", "edit_time": "2019-07-23T16:50:00"}}, {"model": "blog.category", "pk": 3, "fields": {"name": "Django\u6846\u67b6", "add_time": "2019-07-23T16:50:00", "edit_time": "2019-07-23T16:50:00"}}, {"model": "blog.category", "pk": 4, "fields": {"name": "\u7b97\u6cd5\u4e4b\u7f8e", "add_time": "2019-07-23T16:50:00", "edit_time": "2019-07-23T16:50:00"}}, {"model": "blog.tagprofile", "pk": 1, "fields": {"tag_name": "Python"}}, {"model": "blog.tagprofile", "pk": 2, "fields": {"tag_name": "Django"}}, {"model": "blog.tagprofile", "pk": 3, "fields": {"tag_name": "\u722c\u866b"}}, {"model": "blog.tagprofile", "pk": 4, "fields": {"tag_name": "\u6570\u636e\u5e93"}}, {"model": "blog.tagprofile", "pk": 5, "fields": {"tag_name": "Nginx"}}, {"model": "blog.tagprofile", "pk": 6, "fields": {"tag_name": "MySQL"}}, {"model": "blog.tagprofile", "pk": 7, "fields": {"tag_name": "Linux"}}, {"model": "blog.tagprofile", "pk": 8, "fields": {"tag_name": "\u7b97\u6cd5"}}, {"model": "blog.tagprofile", "pk": 9, "fields": {"tag_name": "Pycharm"}}, {"model": "blog.tagprofile", "pk": 10, "fields": {"tag_name": "Xadmin"}}, {"model": "auth.permission", "pk": 1, "fields": {"name": "Can add bookmark", "content_type": 1, "codename": "add_bookmark"}}, {"model": "auth.permission", "pk": 2, "fields": {"name": "Can change bookmark", "content_type": 1, "codename": "change_bookmark"}}, {"model": "auth.permission", "pk": 3, "fields": {"name": "Can delete bookmark", "content_type": 1, "codename": "delete_bookmark"}}, {"model": "auth.permission", "pk": 4, "fields": {"name": "Can add pinned application", "content_type": 2, "codename": "add_pinnedapplication"}}, {"model": "auth.permission", "pk": 5, "fields": {"name": "Can change pinned application", "content_type": 2, "codename": "change_pinnedapplication"}}, {"model": "auth.permission", "pk": 6, "fields": {"name": "Can delete pinned application", "content_type": 2, "codename": "delete_pinnedapplication"}}, {"model": "auth.permission", "pk": 7, "fields": {"name": "Can add log entry", "content_type": 3, "codename": "add_logentry"}}, {"model": "auth.permission", "pk": 8, "fields": {"name": "Can change log entry", "content_type": 3, "codename": "change_logentry"}}, {"model": "auth.permission", "pk": 9, "fields": {"name": "Can delete log entry", "content_type": 3, "codename": "delete_logentry"}}, {"model": "auth.permission", "pk": 10, "fields": {"name": "Can add permission", "content_type": 4, "codename": "add_permission"}}, {"model": "auth.permission", "pk": 11, "fields": {"name": "Can change permission", "content_type": 4, "codename": "change_permission"}}, {"model": "auth.permission", "pk": 12, "fields": {"name": "Can delete permission", "content_type": 4, "codename": "delete_permission"}}, {"model": "auth.permission", "pk": 13, "fields": {"name": "Can add group", "content_type": 5, "codename": "add_group"}}, {"model": "auth.permission", "pk": 14, "fields": {"name": "Can change group", "content_type": 5, "codename": "change_group"}}, {"model": "auth.permission", "pk": 15, "fields": {"name": "Can delete group", "content_type": 5, "codename": "delete_group"}}, {"model": "auth.permission", "pk": 16, "fields": {"name": "Can add content type", "content_type": 6, "codename": "add_contenttype"}}, {"model": "auth.permission", "pk": 17, "fields": {"name": "Can change content type", "content_type": 6, "codename": "change_contenttype"}}, {"model": "auth.permission", "pk": 18, "fields": {"name": "Can delete content type", "content_type": 6, "codename": "delete_contenttype"}}, {"model": "auth.permission", "pk": 19, "fields": {"name": "Can add session", "content_type": 7, "codename": "add_session"}}, {"model": "auth.permission", "pk": 20, "fields": {"name": "Can change session", "content_type": 7, "codename": "change_session"}}, {"model": "auth.permission", "pk": 21, "fields": {"name": "Can delete session", "content_type": 7, "codename": "delete_session"}}, {"model": "auth.permission", "pk": 22, "fields": {"name": "Can add \u7528\u6237\u4fe1\u606f", "content_type": 8, "codename": "add_user"}}, {"model": "auth.permission", "pk": 23, "fields": {"name": "Can change \u7528\u6237\u4fe1\u606f", "content_type": 8, "codename": "change_user"}}, {"model": "auth.permission", "pk": 24, "fields": {"name": "Can delete \u7528\u6237\u4fe1\u606f", "content_type": 8, "codename": "delete_user"}}, {"model": "auth.permission", "pk": 25, "fields": {"name": "Can add \u535a\u5ba2\u4fe1\u606f", "content_type": 9, "codename": "add_blog"}}, {"model": "auth.permission", "pk": 26, "fields": {"name": "Can change \u535a\u5ba2\u4fe1\u606f", "content_type": 9, "codename": "change_blog"}}, {"model": "auth.permission", "pk": 27, "fields": {"name": "Can delete \u535a\u5ba2\u4fe1\u606f", "content_type": 9, "codename": "delete_blog"}}, {"model": "auth.permission", "pk": 28, "fields": {"name": "Can add \u6587\u6863\u5206\u7c7b", "content_type": 10, "codename": "add_category"}}, {"model": "auth.permission", "pk": 29, "fields": {"name": "Can change \u6587\u6863\u5206\u7c7b", "content_type": 10, "codename": "change_category"}}, {"model": "auth.permission", "pk": 30, "fields": {"name": "Can delete \u6587\u6863\u5206\u7c7b", "content_type": 10, "codename": "delete_category"}}, {"model": "auth.permission", "pk": 31, "fields": {"name": "Can add \u8bc4\u8bba\u4fe1\u606f", "content_type": 11, "codename": "add_conment"}}, {"model": "auth.permission", "pk": 32, "fields": {"name": "Can change \u8bc4\u8bba\u4fe1\u606f", "content_type": 11, "codename": "change_conment"}}, {"model": "auth.permission", "pk": 33, "fields": {"name": "Can delete \u8bc4\u8bba\u4fe1\u606f", "content_type": 11, "codename": "delete_conment"}}, {"model": "auth.permission", "pk": 34, "fields": {"name": "Can add \u7559\u8a00", "content_type": 12, "codename": "add_message"}}, {"model": "auth.permission", "pk": 35, "fields": {"name": "Can change \u7559\u8a00", "content_type": 12, "codename": "change_message"}}, {"model": "auth.permission", "pk": 36, "fields": {"name": "Can delete \u7559\u8a00", "content_type": 12, "codename": "delete_message"}}, {"model": "auth.permission", "pk": 37, "fields": {"name": "Can add \u6807\u7b7e\u540d", "content_type": 13, "codename": "add_tagprofile"}}, {"model": "auth.permission", "pk": 38, "fields": {"name": "Can change \u6807\u7b7e\u540d", "content_type": 13, "codename": "change_tagprofile"}}, {"model": "auth.permission", "pk": 39, "fields": {"name": "Can delete \u6807\u7b7e\u540d", "content_type": 13, "codename": "delete_tagprofile"}}, {"model": "blog.user", "pk": 1, "fields": {"password": "pbkdf2_sha256$100000$dXoxSMFPFeuu$Bmmlpf38jeVao6H8dUiLUneIN3PkoNKi7hbp3RXS0z0=", "last_login": "2020-03-05T15:04:37.505", "is_superuser": true, "username": "admin", "first_name": "", "last_name": "", "email": "1@1.com", "is_staff": true, "is_active": true, "date_joined": "2019-07-23T16:42:09.194", "groups": [], "user_permissions": []}}, {"model": "blog.blog", "pk": 1, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-23T16:52:00", "edit_time": "2019-07-23T16:52:00", "read_nums": 235, "conment_nums": 111, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 2, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-23T16:55:00", "edit_time": "2019-07-23T16:55:00", "read_nums": 435, "conment_nums": 233, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 3, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:33.613", "edit_time": "2019-07-26T16:26:33.613", "read_nums": 172, "conment_nums": 230, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 4, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:34.639", "edit_time": "2019-07-26T16:26:34.639", "read_nums": 174, "conment_nums": 294, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 5, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:35.657", "edit_time": "2019-07-26T16:26:35.657", "read_nums": 178, "conment_nums": 259, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 6, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:36.675", "edit_time": "2019-07-26T16:26:36.675", "read_nums": 189, "conment_nums": 233, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 7, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:37.695", "edit_time": "2019-07-26T16:26:37.695", "read_nums": 187, "conment_nums": 275, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 8, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:38.716", "edit_time": "2019-07-26T16:26:38.716", "read_nums": 188, "conment_nums": 228, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 9, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:39.733", "edit_time": "2019-07-26T16:26:39.733", "read_nums": 178, "conment_nums": 300, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 10, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:40.751", "edit_time": "2019-07-26T16:26:40.751", "read_nums": 115, "conment_nums": 228, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 11, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:41.769", "edit_time": "2019-07-26T16:26:41.769", "read_nums": 188, "conment_nums": 300, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 12, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:42.785", "edit_time": "2019-07-26T16:26:42.785", "read_nums": 166, "conment_nums": 292, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "blog.blog", "pk": 13, "fields": {"title": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "category": 3, "author": 1, "content": "## \u4e00\u3001\u5b89\u88c5\r\n* \u4f7f\u7528\u5b89\u88c5\u5de5\u5177\u5b89\u88c5\uff1a\r\n\r\n```python\r\npip install git+git://github.com/sshwsfc/xadmin.git@django2\r\n```\r\n* \u4e0b\u8f7d\u6e90\u7801\uff1a\r\n\r\n```python\r\ngit clone https://github.com/sshwsfc/xadmin.git\r\n```\r\n\u6216\u8005\u5c06\u6587\u4ef6\u5939\u4e2d\u7684xadmin\u6587\u4ef6\u5939\uff0c\u653e\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u5728setting.py\u4e2d\u6dfb\u52a0\u5e94\u7528\u8def\u5f84\u5e76\u6ce8\u518capp\r\n* \u4fee\u6539\u8def\u7531urls.py\uff1a\r\n```python\r\nfrom django.urls import path\r\nimport xadmin\r\n\r\nurlpatterns = [\r\n    path('admin/', xadmin.site.urls),\r\n    ]\r\n```\r\n## models\u6ce8\u518c\r\n* \u5728\u5e94\u7528\u6587\u4ef6\u76ee\u5f55\u4e0b\u65b0\u5efaadminx.py\u6587\u4ef6\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"5/29/18 10:41\"\r\n\r\nimport xadmin\r\n\r\nfrom .models import EmailVerification\r\n\r\nclass EmailVerificationAdmin:    # Python2 \u9700\u8981\u7ee7\u627fobject\u7c7b\r\n    \"\"\"\u90ae\u7bb1\u9a8c\u8bc1\u540e\u53f0\u7ba1\u7406\"\"\"\r\n    list_display = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    list_filter = ['email', 'code', 'send_type']\r\n    search_fields = ['email', 'code', 'send_type', 'send_time', 'is_delete']\r\n    fields = ['send_type', 'email', 'code', 'is_delete']\r\n\r\nxadmin.site.register(EmailVerification, EmailVerificationAdmin)\r\n```\r\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1axadmin\u9ed8\u8ba4\u6ce8\u518cuser\u7c7b\uff08\u53ef\u5728xadmin/adminx.py\u4e2d\u67e5\u770b\uff09\uff0c\u9879\u76ee\u521b\u5efa\u8d85\u7ea7\u7528\u6237\uff0c\u767b\u5f55127.0.0.1:8000/admin\uff08\u6216\u8005\u5176\u4ed6IP/admin\uff09\u3002\r\n## \u4e8c\u3001\u57fa\u672c\u8bbe\u7f6e\r\n* \u6574\u4e2a\u754c\u9762\u4e3b\u9898\u8bbe\u7f6e\r\n\u5728\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u7684adminx.py\u4e2d\u6dfb\u52a0\uff1a\r\n```python\r\nfrom xadmin import views\r\n\r\nclass BaseSetting:     \r\n    enable_themes = True  # \u5f00\u542f\u4e3b\u9898\u529f\u80fd\r\n    use_bootswatch = True\r\n\r\nxadmin.site.register(views.BaseAdminView, BaseSetting)\r\n```\r\n\u5237\u65b0\u540e\u7aef\u7ba1\u7406\u9875\u9762\u540e\uff0c\u53f3\u4e0a\u89d2\u589e\u52a0\u4e86\u4e3b\u9898\u6807\u7b7e\uff0c\u70b9\u51fb\u4e3b\u9898\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u559c\u6b22\u7684\u4e3b\u9898\u6837\u5f0f\u3002\r\n\r\n* \u5de6\u4e0a\u89d2\u540d\u79f0(Django Xadmin)\u3001\u5e95\u90e8(\u6211\u7684\u516c\u53f8)\u4fee\u6539\u3001\u5de6\u4fa7\u83dc\u5355\u680f\u6298\u53e0\r\n```python\r\nclass GlobalSettings:\r\n    \"\"\"\r\n    \u540e\u53f0\u4fee\u6539\r\n    \"\"\"\r\n    site_title = '\u4fee\u6539\u540e\u7684\u540d\u79f0'\r\n    site_footer = '\u4fee\u6539\u540e\u7684\u5e95\u90e8'\r\n    menu_style = 'accordion'  # \u5f00\u542f\u5206\u7ec4\u6298\u53e0\r\n\r\nxadmin.site.register(views.CommAdminView, GlobalSettings)\r\n```\r\n\u5237\u65b0\u540e\u53f0\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u53d1\u73b0\u9875\u9762\u5de6\u4e0a\u89d2\u3001\u5e95\u90e8\u5747\u5df2\u4fee\u6539\uff0c\u4e14\u5de6\u4fa7\u83dc\u5355\u680f\u53ef\u6298\u53e0\r\n\r\n* \u5de6\u4fa7apps\u4e2d\u6587\u663e\u793a\r\n\u9996\u5148\u5728\u5e94\u7528\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539apps.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\n# _*_ coding:utf-8 _*_\r\nfrom django.apps import AppConfig\r\n\r\n\r\nclass CoursesConfig(AppConfig):\r\n    name = 'courses'\r\n    verbose_name = '\u8bfe\u7a0b\u7ba1\u7406'\r\n```\r\n\u8ba9\u540e\u4fee\u6539__init__.py\u6587\u4ef6\u4e3a\uff1a\r\n```python\r\ndefault_app_config = 'courses.apps.CoursesConfig'\r\n```\r\n\u5237\u65b0\u9875\u9762\uff0c\u663e\u793a\u4e2d\u6587\u3002\r\n\r\n## \u8865\u5145\r\n* \u5982\u679cmodels\u7c7b\u663e\u793a\u82f1\u6587\uff0c\u9700\u8981\u5728models.py\u4e2d\u7c7b\u6dfb\u52a0\uff1a\r\n```python\r\nclass Meta:\r\n    verbose_name = '\u90ae\u7bb1\u9a8c\u8bc1\u4fe1\u606f'\r\n    verbose_name_plural = verbose_name\r\n\r\ndef __str__(self):    # Python3 \u4f7f\u7528\r\n    return self.email\r\n\r\ndef __unicode(self):   # Python2 \u4f7f\u7528\r\n    return self.email\r\n```\r\n* \u5de6\u4fa7\u6bcf\u4e2amodels\u56fe\u6807\u8bbe\u7f6e\r\n\r\n\u5de6\u4fa7\u83dc\u5355\u680f\u4e2d\uff0cxadmin\u81ea\u52a8\u6ce8\u518c\u7684models\u5728\u5de6\u4fa7\u6709\u5c0f\u56fe\u6807\uff0c\u90a3\u4e48\u6211\u4eec\u81ea\u5df1\u6ce8\u518c\u7684models\u5c0f\u56fe\u6807\u5982\u4f55\u4fee\u6539\u5462\uff1f  \r\n\r\n\u9996\u5148\u627e\u5230xadmin\u5b58\u653e\u56fe\u6807icon\u7684\u6587\u4ef6:\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/css/font-awesome.css\u6587\u4ef6\u8bbe\u5b9a\u56fe\u6807\u6837\u5f0f\r\n\r\n\u3000\u3000xadmin/static/vendor/font-awesome/fonts\u6587\u4ef6\u5939\u5b58\u653e\u56fe\u6807\u7684\u5176\u4ed6\u8bbe\u7f6e\r\n\r\n\u6253\u5f00font-awesome.css\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7248\u672c\uff08\u4e00\u822c\u9ed8\u8ba4\u90fd\u662f\u6bd4\u8f83\u65e9\u7684\u7248\u672c\uff09\r\n\r\n\u7136\u540e\u767b\u5f55http://www.fontawesome.com.cn/\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u89e3\u538b\u540e\uff0c\u5c06css\u548cfonts\u4e24\u4e2a\u6587\u4ef6\u5939\u590d\u5236\u5230xadmin/static/vendor/font-awesome/\uff0c\u66ff\u6362\u4e4b\u524d\u7684\u6587\u4ef6\u5939\r\n\r\n\u767b\u5f55http://www.fontawesome.com.cn/faicons/\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u56fe\u6807\uff0c\u70b9\u51fb\u540e\uff0c\u590d\u5236class='' ''\u91cc\u9762\u7684\u4ee3\u7801\uff0c\u5728adminx.py\u6587\u4ef6\u4e2d\u5728\u9700\u8981\u6dfb\u52a0\u56fe\u6807\u7684\u7c7b\u91cc\uff0c\u6dfb\u52a0\u4ee3\u7801\u5982\uff1a\r\n\r\nmodel_icon = 'fa fa-comments'", "digest": "\u4f7f\u7528 Xadmin \u60a8\u53ea\u9700\u5b9a\u4e49\u60a8\u6570\u636e\u7684\u5b57\u6bb5\u7b49\u4fe1\u606f\uff0c\u5373\u53ef\u5373\u523b\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u5168\u9762\u7684\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u60a8\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u6269\u5c55\u66f4\u591a\u7684\u5b9a\u5236\u529f\u80fd\u548c\u7cfb\u7edf\u754c\u9762\u3002", "add_time": "2019-07-26T16:26:43.801", "edit_time": "2019-07-26T16:26:43.801", "read_nums": 134, "conment_nums": 211, "image": "blog/2019/07/kecheng.jpeg", "tag": [1, 2]}}, {"model": "blog.blog", "pk": 14, "fields": {"title": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "category": 1, "author": 1, "content": "## \u4e00\u3001\u95ed\u5305  \r\n\r\n\u200b        \u9996\u5148\u7406\u89e3\u4e0bpython\u4e2d\u7684\u51fd\u6570\uff0c\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u53ef\u4ee5\u901a\u8fc7type\u51fd\u6570\u67e5\u770b\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7a7a\u95f4\uff1b\u51fd\u6570\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5185\u90e8\u7684\u53d8\u91cf\u4f1a\u88ab\u89e3\u91ca\u5668\u56de\u6536\uff0c\u4f46\u662f\u5982\u679c\u67d0\u53d8\u91cf\u88ab\u8fd4\u56de\uff0c\u5219\u4e0d\u4f1a\u56de\u6536\uff0c\u56e0\u4e3a\u5f15\u7528\u8ba1\u6570\u5668\u7684\u503c\u4e0d\u4e3a0\uff1b\u65e2\u7136\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ed6\u4e5f\u62e5\u6709\u81ea\u5df1\u7684\u5c5e\u6027\uff1b\u5bf9\u4e8epython\u51fd\u6570\u6765\u8bf4\uff0c\u8fd4\u56de\u7684\u4e0d\u4e00\u5b9a\u662f\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u3002  \r\n\r\n\u200b        \u7531\u6b64\u5f15\u51fa\u95ed\u5305\u7684\u6982\u5ff5\uff0c\u5f53\u5b58\u5728\u51fd\u6570\u5d4c\u5957\u65f6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684func()\u548cin_func()\u5c31\u662f\u5d4c\u5957\u5173\u7cfb\uff09\uff0c\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a\u5185\u90e8\u51fd\u6570\uff0c\u4e14\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3001\u53c2\u6570\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u53d8\u91cf\u3001\u53c2\u6570\u5c01\u88c5\u5728\u51fd\u6570\u4e2d\u4e00\u8d77\u4f5c\u4e3a\u8fd4\u56de\u503c\uff0c\u5176\u4e2d\u7684\u5185\u90e8\u51fd\u6570\u5c31\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305\u3002  \r\n\r\n\u200b        \u5f62\u6210\u95ed\u5305\u7684\u5fc5\u8981\u6761\u4ef6\uff1a  \r\n\r\n\u3000\u30001)\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570(\u51fd\u6570\u91cc\u5b9a\u4e49\u7684\u51fd\u6570\uff09\u2014\u2014\u8fd9\u5bf9\u5e94\u51fd\u6570\u4e4b\u95f4\u7684\u5d4c\u5957  \r\n\r\n\u3000\u30002)\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u4e00\u4e2a\u5b9a\u4e49\u5728\u95ed\u5408\u8303\u56f4\u5185(\u5916\u90e8\u51fd\u6570\u91cc)\u7684\u53d8\u91cf\u2014\u2014\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u53d8\u91cf  \r\n\r\n\u3000\u30003)\u5916\u90e8\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u5185\u5d4c\u51fd\u6570\u2014\u2014\u5fc5\u987b\u8fd4\u56de\u90a3\u4e2a\u5185\u90e8\u51fd\u6570  \r\n\r\n \r\n\r\n## \u4e8c\u3001\u95ed\u5305\u7684\u4f7f\u7528\u573a\u666f  \r\n\r\n\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 15:53\"\r\n\r\ndef funx():\r\n    x=5   # \u5bf9\u4e8efunx\uff0c\u662fL\u4f5c\u7528\u57df\uff0c\u5bf9\u4e8efuny\uff0c\u662fE\u4f5c\u7528\u57df\r\n    def funy():    # \u662f\u4e00\u4e2a\u95ed\u5305\r\n        nonlocal x  # \u7ed1\u5b9a\u5230\u5916\u90e8\u7684x\uff0c\u53ea\u5728python3\u4e2d\u4f7f\u7528\r\n        x+=1\r\n        return x\r\n    return funy\r\n\r\na = funx()\r\nprint(a())\r\nprint(a())\r\nprint(a())\r\nprint(x)\r\n-------------------------\r\n6\r\n7\r\n8\r\nNameError: name 'x' is not defined\r\n```\r\n\u200b        \u672c\u6765x\u53ea\u662ffunx()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5f62\u6210\u4e86\u95ed\u5305\u4e4b\u540e\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u6700\u540e\u7684\u9519\u8bef\u8bf4\u660ex\u5e76\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u5176\u5b9e\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u4e00\u4e2a\u5341\u5206\u6d45\u663e\u7684\u4f5c\u7528\uff0c\u5f62\u6210\u95ed\u5305\u4e4b\u540e\uff0c\u95ed\u5305\u53d8\u91cf\u80fd\u591f\u968f\u7740\u95ed\u5305\u51fd\u6570\u7684\u8c03\u7528\u800c\u5b9e\u65f6\u66f4\u65b0\uff0c\u5c31\u597d\u50cf\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u90a3\u6837\u3002\r\n\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u4e5f\u662f\u8bb2\u95ed\u5305\u7528\u7684\u6700\u591a\u7684\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef func_150(val):   # \u603b\u5206\u4e3a150\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a90\r\n    passline = 90\r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\ndef func_100(val):   # \u603b\u5206\u4e3a100\u65f6\uff0c\u53ca\u683c\u5206\u6570\u4e3a60\r\n    passline = 60 \r\n    if val >= passline:\r\n        print \"pass\"\r\n    else:\r\n        print \"fail\"\r\n\r\nfunc_100(89)  \r\nfunc_150(89)\r\n\r\n# \u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e0a\u9762\u7684\u4ee3\u7801\uff1a\r\n\r\ndef set_passline(passline):\r\n    def cmp(val):\r\n        if val >= passline:\r\n            print \"pass\"\r\n        else:\r\n            print \"fail\"\r\n    return cmp\r\n\r\nf_100 = set_passline(60)    # f_100\u8c03\u7528\u51fd\u6570set_passline()\uff0c\u5e76\u5c0660\u8d4b\u503c\u7ed9\u53d8\u91cfpassline,\u8fd9\u662ff_100\u7b49\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570cmp\r\nf_150 = set_passline(90)\r\nf_100(89)     # f_100()=cmp(),\u5c0689\u8d4b\u503c\u7ed9val\uff0c\u8fd0\u884ccmp()\u51fd\u6570\uff0c\u8f93\u51fa\u7ed3\u679c\r\nf_150(89)\r\n```\r\n\r\n\u7b2c\u4e09\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\n\r\n\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\r\n    return in_dec\r\n\r\n\r\nmy_sums = dec(my_sum)  # \u547d\u540d\u4e3amy_sums\uff0c\u662f\u4e3a\u4e86\u548cmy_sum\u8fdb\u884c\u533a\u5206\uff0c\u4fbf\u4e8e\u7406\u89e3\r\n# \u2460\u8c03\u7528dec()\u51fd\u6570\uff0c\u5c06dec\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9my_sums\uff0c\u76f8\u5f53\u4e8emy_sums=in_dec\uff0c\u2461\u5c06\u51fd\u6570my_sum\u8d4b\u503c\u7ed9func\uff0c\u76f8\u5f53\u4e8efunc=my_sum\r\nresult = my_sums(1, 2, 3, 4, 5)  \r\n# \u2462\u76f8\u5f53\u4e8e\u5c06(1, 2, 3, 4, 5)\u8d4b\u503c\u7ed9in_dec\u51fd\u6570\u4e2d\u7684arg\uff0c\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570in_dec()\uff0c\r\n# \u2463in_dec()\u51fd\u6570\u7684return\u8fd4\u56de\u503c\u662ffunc()\u51fd\u6570\uff0c\u5c06in_dec\u51fd\u6570\u4e2d\u7684arg\u8d4b\u503c\u7ed9func()\u51fd\u6570\u4e2d\u7684arg,\u4e5f\u5c31\u662f\u8d4b\u503c\u7ed9my_sum()\u4e2d\u7684arg\r\n# \u2464\u8c03\u7528\u5e76\u6267\u884c\u51fd\u6570my_sum()\uff0c\u5c06sum(arg)\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d8\u91cfresult\r\nprint(result)\r\n------------\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u200b        \u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff0c\u5148\u8fd0\u884cdec()\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u662fin_dec\u51fd\u6570\uff0c\u518d\u8fd0\u884cin_dec\u51fd\u6570\uff0c\u5176\u8fd4\u56de\u503c\u4e3afunc\u51fd\u6570\uff0c\u4e5f\u5c31\u662fmy_sum\u51fd\u6570\uff0c\u518d\u8fd0\u884cmy_sum\u51fd\u6570dec() -> in_dec() -> my_sum()  \r\n\r\n\u7b2c\u56db\u4e2a\u4f8b\u5b50\uff1a\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\n__author__ = \"\u95ee\u9053\u7f16\u7a0b\"\r\n__date__ = \"2018-06-13 17:08\"\r\n\r\nvariable = 300\r\n\r\ndef test_scopt():\r\n    print(variable)  # variable\u662ftest_scopt()\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u662f\u5728\u6253\u5370\u65f6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5185\u5b58\u5bf9\u8c61\u3002\r\n    variable = 200  # \u56e0\u4e3a\u8fd9\u91cc\uff0c\u6240\u4ee5variable\u5c31\u53d8\u4e3a\u4e86\u5c40\u90e8\u53d8\u91cf\r\n\r\ntest_scopt()\r\nprint(variable)\r\n------------\r\nUnboundLocalError: local variable 'variable' referenced before assignment\r\n```\r\n\r\n\u3000\u3000\u4e0a\u9762\u7684\u4f8b\u5b50\u4f1a\u62a5\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u7684\u9884\u7f16\u8bd1\u80fd\u591f\u5728test_scopt()\u4e2d\u627e\u5230\u5c40\u90e8\u53d8\u91cfvariable(\u5bf9variable\u8fdb\u884c\u4e86\u8d4b\u503c)\u3002\u5728\u5c40\u90e8\u4f5c\u7528\u57df\u627e\u5230\u4e86\u53d8\u91cf\u540d\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5347\u7ea7\u5230\u5d4c\u5957\u4f5c\u7528\u57df\u53bb\u5bfb\u627e\u3002\u4f46\u662f\u5728\u4f7f\u7528print\u8bed\u53e5\u5c06\u53d8\u91cfvariable\u6253\u5370\u65f6\uff0c\u5c40\u90e8\u53d8\u91cfvariable\u5e76\u6709\u6ca1\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61(\u6ca1\u6709\u5b9a\u4e49\u548c\u521d\u59cb\u5316\uff0c\u5373\u6ca1\u6709\u8d4b\u503c)\u3002\u672c\u8d28\u4e0a\u8fd8\u662fPython\u8c03\u7528\u53d8\u91cf\u65f6\u9075\u5faa\u7684LEGB\u6cd5\u5219\u548cPython\u89e3\u6790\u5668\u7684\u7f16\u8bd1\u539f\u7406\uff0c\u51b3\u5b9a\u4e86\u8fd9\u4e2a\u9519\u8bef\u7684\u53d1\u751f\u3002\u6240\u4ee5\uff0c\u5728\u8c03\u7528\u4e00\u4e2a\u53d8\u91cf\u4e4b\u524d\uff0c\u9700\u8981\u4e3a\u8be5\u53d8\u91cf\u8d4b\u503c(\u7ed1\u5b9a\u4e00\u4e2a\u5185\u5b58\u5bf9\u8c61)\u3002\r\n\r\n\u3000\u3000\u6ce8\u610f\uff1a\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u89e6\u53d1\u7684\u9519\u8bef\u662fUnboundLocalError\u800c\u4e0d\u662fNameError\uff1aname \u2018variable\u2019 is not defined\u3002\u56e0\u4e3a\u53d8\u91cfvariable\u4e0d\u5728\u5168\u5c40\u4f5c\u7528\u57df\u3002Python\u4e2d\u7684\u6a21\u5757\u4ee3\u7801\u5728\u6267\u884c\u4e4b\u524d\uff0c\u5e76\u4e0d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u4f46\u662f\u6a21\u5757\u5185\u7684\u51fd\u6570\u4f53\u4ee3\u7801\u5728\u8fd0\u884c\u524d\u4f1a\u7ecf\u8fc7\u9884\u7f16\u8bd1\uff0c\u56e0\u6b64\u4e0d\u7ba1\u53d8\u91cf\u540d\u7684\u7ed1\u5b9a\u53d1\u751f\u5728\u4f5c\u7528\u57df\u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u80fd\u88ab\u7f16\u8bd1\u5668\u77e5\u9053\u3002Python\u867d\u7136\u662f\u4e00\u4e2a\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u53d8\u91cf\u540d\u67e5\u627e\u662f\u52a8\u6001\u53d1\u751f\u7684\uff0c\u76f4\u5230\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u624d\u4f1a\u53d1\u73b0\u4f5c\u7528\u57df\u65b9\u9762\u7684\u95ee\u9898\r\n\r\n\u3000\u3000\u53ef\u4ee5\u4f7f\u7528global\u5c06\u53d8\u91cfvariable\u58f0\u660e\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\r\n\r\n## \u4e09\u3001\u88c5\u9970\u5668\r\n\r\n\u6982\u5ff5\u6027\u7684\u77e5\u8bc6\uff0c\u62d7\u53e3\u7684\u8868\u8ff0\uff1a\r\n1.\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u95ed\u5305\u7684\u4f7f\u7528\uff1b\r\n2.\u88c5\u9970\u5668\u7684\u4f5c\u7528\u662f\u88c5\u9970\u51fd\u6570\uff1b\r\n3.\u88c5\u9970\u5668\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u88ab\u88c5\u9970\u7684\u51fd\u6570\u63a5\u6536\uff1b\r\n4.\u88ab\u88c5\u9970\u51fd\u6570\u6807\u8bc6\u7b26\u6307\u5411\u8fd4\u56de\u7684\u51fd\u6570\u5bf9\u8c61\u3002\r\n\r\n\u3000\u3000\u5c06\u4e0a\u9762\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u7528\u4e0a\u88c5\u9970\u5668\uff1a\r\n\r\n```python\r\ndef dec(func):\r\n    def in_dec(*arg):\r\n        print('in in_dec,arg=', arg)\r\n        if len(arg) == 0:\r\n            return 0\r\n        for val in arg:\r\n            if not isinstance(val, int):\r\n                return 0\r\n        return func(*arg)\r\n\u3000\u3000 print('in dec')  # \u65b0\u589e\u7684\u4e00\u884c\r\n    return in_dec\r\n@dec \r\ndef my_sum(*arg):\r\n    print('in my_sum,arg=',arg)\r\n    return sum(arg)\r\nprint(type(my_sum))\r\n```\r\n\r\n\u3000\u3000\u5bf9\u6982\u5ff5\u7684\u5b9e\u4f8b\u5316\uff1a\r\n\r\n1\u3001@dec\u662f\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u662f\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u7684\u88c5\u9970\u5668\uff1b\r\n\r\n2\u3001\u88ab\u88c5\u9970\u7684\u51fd\u6570\u662fmy_sum()\uff0c\u5373\u8c03\u7528dec()\u51fd\u6570\u5f62\u6210\u88c5\u9970\u5668\u65f6\uff0cdec()\u51fd\u6570\u7684\u53c2\u6570\u4e3amy_sum()\u51fd\u6570\uff0c\u5373\uff1afunc = my_sum\r\n\r\n3\u3001\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u662f\u51fd\u6570in_dec()\uff0c\u8be5\u8fd4\u56de\u503c\u88ab\u51fd\u6570my_sum()\u63a5\u6536\uff0c\u5176\u5b9e\u662f\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\uff08\u5373my_sum()\u51fd\u6570\uff09\u7684\u6807\u8bc6\u7b26my_sum\uff0c\u5373\uff1amy_sum=in_dec\r\n\r\n\u3000\u3000\u76f4\u63a5\u8fd0\u884c\u8be5\u6587\u4ef6\uff0c\u8f93\u51fa\uff1a\r\n```python\r\n--------------\r\nin dec\r\n<class 'function'>     # \u6b64\u65f6\u7684my_sum\u5e76\u975e\u6307\u5b9a\u4e49\u7684def my_sum(*arg)\u51fd\u6570\uff0c\u800c\u662f\u53d8\u6210\u63a5\u6536\u4e86\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff0cin_dec\u51fd\u6570\u3002\r\n```\r\n\u3000\u3000\u8bf4\u660e\u53ea\u8981\u4f7f\u7528\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u4f1a\u8c03\u7528\u88c5\u9970\u5668\u91cc\u7684\u51fd\u6570\uff1b\u5e76\u4e14\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\uff1ain_dec()\uff0c\u88abmy_sum\u63a5\u6536\uff08\u5982\u679c\u6ca1\u6709return in_dec\uff0c\u76f4\u63a5\u8fd0\u884c\uff0c\u5219my_sum\u683c\u5f0f\u4e3a\uff1a<class 'NoneType'>\uff0c\u8bf4\u660e\u88c5\u9970\u5668\u6ca1\u6709\u8fd4\u56de\u503c\u65f6\uff0c\u4f1a\u8fd4\u56deNone\uff0c\u8fd9\u4e00\u70b9\u8ddf\u51fd\u6570\u4e00\u6837\uff09\u3002\r\n\r\n\u3000\u3000\u63a5\u4e0b\u6765\uff0c\u6267\u884c\u8bed\u53e5\uff1a\r\n\r\n```python\r\nresult = my_sum(1, 2, 3, 4, 5)  \r\nprint(result)\r\n------------------\r\nin dec\r\n<class 'function'>\r\nin in_dec,arg= (1, 2, 3, 4, 5)\r\nin my_sum,arg= (1, 2, 3, 4, 5)\r\n15\r\n```\r\n\r\n\u3000\u3000\u8fd0\u884c\u8fc7\u7a0b\u4e3a\uff08\u7ed3\u5408\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u8fdb\u884c\u7406\u89e3\uff09\uff1a\r\n\r\n\u3000\u30001\u3001@dec\uff0c\u8c03\u7528dec\u51fd\u6570\uff0c\u5176\u53c2\u6570\u5c31\u662f\u88ab\u88c5\u9970\u7684\u51fd\u6570my_sum()\uff0c\u5373func=my_sum\uff0c\u6267\u884cprint('in dec')\uff0c\u8fd4\u56dein_dec\u51fd\u6570\uff0c\u88abmy_sum\u63a5\u6536\uff0c\u5373\uff1a\u6700\u540e\u4f1a\u5c06\u51fd\u6570in_dec\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u4f20\u7ed9\u88ab\u88c5\u9970\u51fd\u6570\u7684\u6807\u8bc6\u7b26my_sum\uff1b\r\n\r\n\u3000\u30002\u3001\u8c03\u7528in_dec\u51fd\u6570\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u3001if\u3001for\u8bed\u53e5\uff0c\u6267\u884creturn func(*arg)\uff0cfunc=my_sum\u51fd\u6570\uff1b\r\n\r\n\u3000\u30003\u3001\u8c03\u7528\u51fd\u6570my_sum()\uff0c\u53c2\u6570\u4e3a(1,2,3,4,5)\uff0c\u6267\u884cprint\u8bed\u53e5\uff0c\u6267\u884creturn sum(*arg)\uff0c\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff1b", "digest": "\u95ed\u5305(closure)\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u91cd\u8981\u7684\u8bed\u6cd5\u7ed3\u6784\u3002\u95ed\u5305\u4e5f\u662f\u4e00\u79cd\u7ec4\u7ec7\u4ee3\u7801\u7684\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u91cd\u590d\u4f7f\u7528\u6027\u3002\r\n\u5982\u679c\u5728\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\u91cc\uff0c\u5bf9\u5728\u5916\u90e8\u51fd\u6570\u5185\uff08\u4f46\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff09\u7684\u53d8\u91cf\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5185\u5d4c\u51fd\u6570\u5c31\u88ab\u8ba4\u4e3a\u662f\u95ed\u5305(closure)\u3002\r\n\u5b9a\u4e49\u5728\u5916\u90e8\u51fd\u6570\u5185\u4f46\u7531\u5185\u90e8\u51fd\u6570\u5f15\u7528\u6216\u8005\u4f7f\u7528\u7684\u53d8\u91cf\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002", "add_time": "2019-07-26T16:26:00", "edit_time": "2019-07-26T16:26:00", "read_nums": 161, "conment_nums": 253, "image": "blog/2019/07/a-zofpython.jpg", "tag": [1, 4]}}, {"model": "admin.logentry", "pk": 1, "fields": {"action_time": "2019-07-23T16:50:13.054", "user": 1, "content_type": 10, "object_id": "1", "object_repr": "Python\u5927\u6cd5", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 2, "fields": {"action_time": "2019-07-23T16:50:21.256", "user": 1, "content_type": 10, "object_id": "2", "object_repr": "\u6570\u636e\u5e93", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 3, "fields": {"action_time": "2019-07-23T16:50:23.052", "user": 1, "content_type": 10, "object_id": "2", "object_repr": "\u6570\u636e\u5e93", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 4, "fields": {"action_time": "2019-07-23T16:50:30.568", "user": 1, "content_type": 10, "object_id": "3", "object_repr": "Django\u6846\u67b6", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 5, "fields": {"action_time": "2019-07-23T16:50:37.693", "user": 1, "content_type": 10, "object_id": "4", "object_repr": "\u7b97\u6cd5\u4e4b\u7f8e", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 6, "fields": {"action_time": "2019-07-23T16:51:32.012", "user": 1, "content_type": 13, "object_id": "1", "object_repr": "Python", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 7, "fields": {"action_time": "2019-07-23T16:51:37.262", "user": 1, "content_type": 13, "object_id": "2", "object_repr": "Django", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 8, "fields": {"action_time": "2019-07-23T16:51:42.075", "user": 1, "content_type": 13, "object_id": "3", "object_repr": "\u722c\u866b", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 9, "fields": {"action_time": "2019-07-23T16:51:48.482", "user": 1, "content_type": 13, "object_id": "4", "object_repr": "\u6570\u636e\u5e93", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 10, "fields": {"action_time": "2019-07-23T16:51:55.284", "user": 1, "content_type": 13, "object_id": "5", "object_repr": "Nginx", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 11, "fields": {"action_time": "2019-07-23T16:52:00.592", "user": 1, "content_type": 13, "object_id": "6", "object_repr": "MySQL", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 12, "fields": {"action_time": "2019-07-23T16:52:05.972", "user": 1, "content_type": 13, "object_id": "7", "object_repr": "Linux", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 13, "fields": {"action_time": "2019-07-23T16:52:10.576", "user": 1, "content_type": 13, "object_id": "8", "object_repr": "\u7b97\u6cd5", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 14, "fields": {"action_time": "2019-07-23T16:52:15.765", "user": 1, "content_type": 13, "object_id": "9", "object_repr": "Pycharm", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 15, "fields": {"action_time": "2019-07-23T16:52:20.286", "user": 1, "content_type": 13, "object_id": "10", "object_repr": "Xadmin", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 16, "fields": {"action_time": "2019-07-23T16:54:59.937", "user": 1, "content_type": 9, "object_id": "1", "object_repr": "Xadmin2.0(for Django2.0) \u57fa\u672c\u8bbe\u7f6e", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 30, "fields": {"action_time": "2019-08-01T17:09:29.131", "user": 1, "content_type": 9, "object_id": "14", "object_repr": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 31, "fields": {"action_time": "2019-08-01T17:11:59.156", "user": 1, "content_type": 9, "object_id": "14", "object_repr": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 32, "fields": {"action_time": "2019-08-01T17:17:04.446", "user": 1, "content_type": 9, "object_id": "14", "object_repr": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 33, "fields": {"action_time": "2019-08-01T17:22:03.549", "user": 1, "content_type": 9, "object_id": "14", "object_repr": "Python\u4e2d\u5bf9\u95ed\u5305\u3001\u88c5\u9970\u5668\u7684\u57fa\u672c\u7406\u89e3", "action_flag": 2, "change_message": "[]"}}]